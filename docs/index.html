<html ng-app="YmapsDemo">
<head>
    <title>Yandex Maps API as an Angular JS direcitive</title>
    <meta charset='utf-8'>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0-wip/css/bootstrap.min.css">
    <link rel="stylesheet" href="rainbow-github.css">
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
    <script type="text/javascript" src="rainbow.min.js"></script>
    <script src="angular-ymaps.js"></script>
    <script src="app.js"></script>
</head>
<body ng-controller="MapCtrl">
<header class="header">
    <h1>Удобная работа с Яндекс-картами</h1>
    <p>Модуль для добавления карт через AngularJS</p>
    <a href="#docs" class="btn btn-default">Документация</a>
    <a href="angular-ymaps.js" class="btn btn-danger">Скачать</a>
</header>
<div class="demo_content clearfix">
    <div class="controls col-sm-6">
        <h3>Пример работы:</h3>
        <p>Таблица связана с маркерами на карте, можно добавлять и удалять их, а также изменять координаты. Все изменения автоматически отразятся на карте.</p>
        <table class="table"><thead>
        <tr>
            <th>#</th><th>Широта</th><th>Долгота</th><th></th>
        </tr>
        </thead><tbody>
        <tr ng-repeat="marker in markers">
            <td>{{$index+1}}</td>
            <td><input type="text" ng-model="marker.coordinates[0]" class="form-control" /></td>
            <td><input type="text" ng-model="marker.coordinates[1]" class="form-control" /></td>
            <td><button type="button" class="close" aria-hidden="true" ng-click="removeMarker(marker)">&times;</button></td>
        </tr>
        <tr ng-show="addingMarker">
            <td>*</td>
            <td><input type="text" ng-model="markerLat" placeholder="Lat" class="form-control" required /></td>
            <td><input type="text" ng-model="markerLon" placeholder="Lon" class="form-control" required /></td>
            <td><button type="button" class="close" aria-hidden="true" ng-click="submitMarker(markerLat, markerLon)"
                        title="Добавить">+</button></td>
        </tr>
        </tbody></table>
        <button type="button" class="btn btn-default btn-block add_button" ng-hide="addingMarker"
                ng-click="addMarker()">Добавить маркер</button>
    </div>
    <yandex-map class="map_container col-sm-6" center="map.center" zoom="map.zoom">
        <ymap-marker coordinates="marker.coordinates" index="$index+1" ng-repeat="marker in markers"></ymap-marker>
    </yandex-map>
</div>
<div class="description" id="docs">
    <%= content %>
</div>
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39285873-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>
</html>